(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode("._dotSvgContainer_64xbd_1{position:absolute;width:100%;height:100%;inset-block-start:0;inset-inline-start:0}._container_1xxyl_1{position:relative;overflow:hidden;width:100%;height:100%}._canvasWrapper_1xxyl_8{position:relative;width:100%;height:100%;overflow:hidden;background-color:var(--kf-color-bg-gray);cursor:grab;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._canvasWrapper_1xxyl_8._panning_1xxyl_21{cursor:grabbing}._canvas_1xxyl_8{position:relative;z-index:2;width:100%;height:100%}._canvas_1xxyl_8>div:first-of-type{position:absolute;inset-inline-start:0;inset-block-start:0;transition:transform .01s ease}._contentWrapper_1xxyl_39{position:absolute}._verticalScrollBar_17thb_1{position:absolute;inset-inline-end:2px;inset-block-start:0;inset-block-end:0;background:transparent}._horizontalScrollBar_17thb_9{position:absolute;inset-block-end:2px;inset-inline-start:0;inset-inline-end:0;background:transparent}._verticalScrollBar_17thb_1>div,._horizontalScrollBar_17thb_9>div{position:absolute;border-radius:50px;z-index:8;cursor:pointer}._verticalScrollBar_17thb_1>div{width:100%}._horizontalScrollBar_17thb_9>div{height:100%}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
(function(pt,N){typeof exports=="object"&&typeof module<"u"?N(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],N):(pt=typeof globalThis<"u"?globalThis:pt||self,N(pt.ReactInfiniteCanvas={},pt.React))})(this,function(pt,N){"use strict";var Re={exports:{}},Ut={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ze;function ir(){if(Ze)return Ut;Ze=1;var t=N,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(c,l,f){var u,p={},m=null,w=null;f!==void 0&&(m=""+f),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(w=l.ref);for(u in l)r.call(l,u)&&!a.hasOwnProperty(u)&&(p[u]=l[u]);if(c&&c.defaultProps)for(u in l=c.defaultProps,l)p[u]===void 0&&(p[u]=l[u]);return{$$typeof:e,type:c,key:m,ref:w,props:p,_owner:i.current}}return Ut.Fragment=n,Ut.jsx=o,Ut.jsxs=o,Ut}var Vt={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Je;function or(){return Je||(Je=1,process.env.NODE_ENV!=="production"&&function(){var t=N,e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),z=Symbol.iterator,R="@@iterator";function A(s){if(s===null||typeof s!="object")return null;var _=z&&s[z]||s[R];return typeof _=="function"?_:null}var E=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function I(s){{for(var _=arguments.length,x=new Array(_>1?_-1:0),O=1;O<_;O++)x[O-1]=arguments[O];$("error",s,x)}}function $(s,_,x){{var O=E.ReactDebugCurrentFrame,Y=O.getStackAddendum();Y!==""&&(_+="%s",x=x.concat([Y]));var V=x.map(function(k){return String(k)});V.unshift("Warning: "+_),Function.prototype.apply.call(console[s],console,V)}}var B=!1,U=!1,D=!1,L=!1,F=!1,j;j=Symbol.for("react.module.reference");function rt(s){return!!(typeof s=="string"||typeof s=="function"||s===r||s===a||F||s===i||s===f||s===u||L||s===w||B||U||D||typeof s=="object"&&s!==null&&(s.$$typeof===m||s.$$typeof===p||s.$$typeof===o||s.$$typeof===c||s.$$typeof===l||s.$$typeof===j||s.getModuleId!==void 0))}function ut(s,_,x){var O=s.displayName;if(O)return O;var Y=_.displayName||_.name||"";return Y!==""?x+"("+Y+")":x}function Q(s){return s.displayName||"Context"}function nt(s){if(s==null)return null;if(typeof s.tag=="number"&&I("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case r:return"Fragment";case n:return"Portal";case a:return"Profiler";case i:return"StrictMode";case f:return"Suspense";case u:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case c:var _=s;return Q(_)+".Consumer";case o:var x=s;return Q(x._context)+".Provider";case l:return ut(s,s.render,"ForwardRef");case p:var O=s.displayName||null;return O!==null?O:nt(s.type)||"Memo";case m:{var Y=s,V=Y._payload,k=Y._init;try{return nt(k(V))}catch{return null}}}return null}var h=Object.assign,b=0,d,g,v,y,S,T,C;function X(){}X.__reactDisabledLog=!0;function P(){{if(b===0){d=console.log,g=console.info,v=console.warn,y=console.error,S=console.group,T=console.groupCollapsed,C=console.groupEnd;var s={configurable:!0,enumerable:!0,value:X,writable:!0};Object.defineProperties(console,{info:s,log:s,warn:s,error:s,group:s,groupCollapsed:s,groupEnd:s})}b++}}function W(){{if(b--,b===0){var s={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:h({},s,{value:d}),info:h({},s,{value:g}),warn:h({},s,{value:v}),error:h({},s,{value:y}),group:h({},s,{value:S}),groupCollapsed:h({},s,{value:T}),groupEnd:h({},s,{value:C})})}b<0&&I("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var H=E.ReactCurrentDispatcher,G;function Z(s,_,x){{if(G===void 0)try{throw Error()}catch(Y){var O=Y.stack.trim().match(/\n( *(at )?)/);G=O&&O[1]||""}return`
`+G+s}}var it=!1,lt;{var Ft=typeof WeakMap=="function"?WeakMap:Map;lt=new Ft}function zt(s,_){if(!s||it)return"";{var x=lt.get(s);if(x!==void 0)return x}var O;it=!0;var Y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var V;V=H.current,H.current=null,P();try{if(_){var k=function(){throw Error()};if(Object.defineProperty(k.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(k,[])}catch(bt){O=bt}Reflect.construct(s,[],k)}else{try{k.call()}catch(bt){O=bt}s.call(k.prototype)}}else{try{throw Error()}catch(bt){O=bt}s()}}catch(bt){if(bt&&O&&typeof bt.stack=="string"){for(var M=bt.stack.split(`
`),ot=O.stack.split(`
`),J=M.length-1,q=ot.length-1;J>=1&&q>=0&&M[J]!==ot[q];)q--;for(;J>=1&&q>=0;J--,q--)if(M[J]!==ot[q]){if(J!==1||q!==1)do if(J--,q--,q<0||M[J]!==ot[q]){var ft=`
`+M[J].replace(" at new "," at ");return s.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",s.displayName)),typeof s=="function"&&lt.set(s,ft),ft}while(J>=1&&q>=0);break}}}finally{it=!1,H.current=V,W(),Error.prepareStackTrace=Y}var Ht=s?s.displayName||s.name:"",rr=Ht?Z(Ht):"";return typeof s=="function"&&lt.set(s,rr),rr}function Rt(s,_,x){return zt(s,!1)}function ee(s){var _=s.prototype;return!!(_&&_.isReactComponent)}function wt(s,_,x){if(s==null)return"";if(typeof s=="function")return zt(s,ee(s));if(typeof s=="string")return Z(s);switch(s){case f:return Z("Suspense");case u:return Z("SuspenseList")}if(typeof s=="object")switch(s.$$typeof){case l:return Rt(s.render);case p:return wt(s.type,_,x);case m:{var O=s,Y=O._payload,V=O._init;try{return wt(V(Y),_,x)}catch{}}}return""}var xt=Object.prototype.hasOwnProperty,At={},be=E.ReactDebugCurrentFrame;function It(s){if(s){var _=s._owner,x=wt(s.type,s._source,_?_.type:null);be.setExtraStackFrame(x)}else be.setExtraStackFrame(null)}function Ee(s,_,x,O,Y){{var V=Function.call.bind(xt);for(var k in s)if(V(s,k)){var M=void 0;try{if(typeof s[k]!="function"){var ot=Error((O||"React class")+": "+x+" type `"+k+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof s[k]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw ot.name="Invariant Violation",ot}M=s[k](_,k,O,x,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(J){M=J}M&&!(M instanceof Error)&&(It(Y),I("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",O||"React class",x,k,typeof M),It(null)),M instanceof Error&&!(M.message in At)&&(At[M.message]=!0,It(Y),I("Failed %s type: %s",x,M.message),It(null))}}}var $e=Array.isArray;function Yt(s){return $e(s)}function Se(s){{var _=typeof Symbol=="function"&&Symbol.toStringTag,x=_&&s[Symbol.toStringTag]||s.constructor.name||"Object";return x}}function Ha(s){try{return Gn(s),!1}catch{return!0}}function Gn(s){return""+s}function Kn(s){if(Ha(s))return I("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Se(s)),Gn(s)}var ne=E.ReactCurrentOwner,Ua={key:!0,ref:!0,__self:!0,__source:!0},Bn,Zn,je;je={};function Va(s){if(xt.call(s,"ref")){var _=Object.getOwnPropertyDescriptor(s,"ref").get;if(_&&_.isReactWarning)return!1}return s.ref!==void 0}function Wa(s){if(xt.call(s,"key")){var _=Object.getOwnPropertyDescriptor(s,"key").get;if(_&&_.isReactWarning)return!1}return s.key!==void 0}function $a(s,_){if(typeof s.ref=="string"&&ne.current&&_&&ne.current.stateNode!==_){var x=nt(ne.current.type);je[x]||(I('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',nt(ne.current.type),s.ref),je[x]=!0)}}function ja(s,_){{var x=function(){Bn||(Bn=!0,I("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",_))};x.isReactWarning=!0,Object.defineProperty(s,"key",{get:x,configurable:!0})}}function Ga(s,_){{var x=function(){Zn||(Zn=!0,I("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",_))};x.isReactWarning=!0,Object.defineProperty(s,"ref",{get:x,configurable:!0})}}var Ka=function(s,_,x,O,Y,V,k){var M={$$typeof:e,type:s,key:_,ref:x,props:k,_owner:V};return M._store={},Object.defineProperty(M._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(M,"_self",{configurable:!1,enumerable:!1,writable:!1,value:O}),Object.defineProperty(M,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Y}),Object.freeze&&(Object.freeze(M.props),Object.freeze(M)),M};function Ba(s,_,x,O,Y){{var V,k={},M=null,ot=null;x!==void 0&&(Kn(x),M=""+x),Wa(_)&&(Kn(_.key),M=""+_.key),Va(_)&&(ot=_.ref,$a(_,Y));for(V in _)xt.call(_,V)&&!Ua.hasOwnProperty(V)&&(k[V]=_[V]);if(s&&s.defaultProps){var J=s.defaultProps;for(V in J)k[V]===void 0&&(k[V]=J[V])}if(M||ot){var q=typeof s=="function"?s.displayName||s.name||"Unknown":s;M&&ja(k,q),ot&&Ga(k,q)}return Ka(s,M,ot,Y,O,ne.current,k)}}var Ge=E.ReactCurrentOwner,Jn=E.ReactDebugCurrentFrame;function Xt(s){if(s){var _=s._owner,x=wt(s.type,s._source,_?_.type:null);Jn.setExtraStackFrame(x)}else Jn.setExtraStackFrame(null)}var Ke;Ke=!1;function Be(s){return typeof s=="object"&&s!==null&&s.$$typeof===e}function qn(){{if(Ge.current){var s=nt(Ge.current.type);if(s)return`

Check the render method of \``+s+"`."}return""}}function Za(s){return""}var Qn={};function Ja(s){{var _=qn();if(!_){var x=typeof s=="string"?s:s.displayName||s.name;x&&(_=`

Check the top-level render call using <`+x+">.")}return _}}function tr(s,_){{if(!s._store||s._store.validated||s.key!=null)return;s._store.validated=!0;var x=Ja(_);if(Qn[x])return;Qn[x]=!0;var O="";s&&s._owner&&s._owner!==Ge.current&&(O=" It was passed a child from "+nt(s._owner.type)+"."),Xt(s),I('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',x,O),Xt(null)}}function er(s,_){{if(typeof s!="object")return;if(Yt(s))for(var x=0;x<s.length;x++){var O=s[x];Be(O)&&tr(O,_)}else if(Be(s))s._store&&(s._store.validated=!0);else if(s){var Y=A(s);if(typeof Y=="function"&&Y!==s.entries)for(var V=Y.call(s),k;!(k=V.next()).done;)Be(k.value)&&tr(k.value,_)}}}function qa(s){{var _=s.type;if(_==null||typeof _=="string")return;var x;if(typeof _=="function")x=_.propTypes;else if(typeof _=="object"&&(_.$$typeof===l||_.$$typeof===p))x=_.propTypes;else return;if(x){var O=nt(_);Ee(x,s.props,"prop",O,s)}else if(_.PropTypes!==void 0&&!Ke){Ke=!0;var Y=nt(_);I("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Y||"Unknown")}typeof _.getDefaultProps=="function"&&!_.getDefaultProps.isReactClassApproved&&I("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Qa(s){{for(var _=Object.keys(s.props),x=0;x<_.length;x++){var O=_[x];if(O!=="children"&&O!=="key"){Xt(s),I("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",O),Xt(null);break}}s.ref!==null&&(Xt(s),I("Invalid attribute `ref` supplied to `React.Fragment`."),Xt(null))}}function nr(s,_,x,O,Y,V){{var k=rt(s);if(!k){var M="";(s===void 0||typeof s=="object"&&s!==null&&Object.keys(s).length===0)&&(M+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var ot=Za();ot?M+=ot:M+=qn();var J;s===null?J="null":Yt(s)?J="array":s!==void 0&&s.$$typeof===e?(J="<"+(nt(s.type)||"Unknown")+" />",M=" Did you accidentally export a JSX literal instead of a component?"):J=typeof s,I("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",J,M)}var q=Ba(s,_,x,Y,V);if(q==null)return q;if(k){var ft=_.children;if(ft!==void 0)if(O)if(Yt(ft)){for(var Ht=0;Ht<ft.length;Ht++)er(ft[Ht],s);Object.freeze&&Object.freeze(ft)}else I("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else er(ft,s)}return s===r?Qa(q):qa(q),q}}function ts(s,_,x){return nr(s,_,x,!0)}function es(s,_,x){return nr(s,_,x,!1)}var ns=es,rs=ts;Vt.Fragment=r,Vt.jsx=ns,Vt.jsxs=rs}()),Vt}process.env.NODE_ENV==="production"?Re.exports=ir():Re.exports=or();var K=Re.exports,Te="http://www.w3.org/1999/xhtml";const qe={svg:"http://www.w3.org/2000/svg",xhtml:Te,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function re(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),qe.hasOwnProperty(e)?{space:qe[e],local:t}:t}function ar(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Te&&e.documentElement.namespaceURI===Te?e.createElement(t):e.createElementNS(n,t)}}function sr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Qe(t){var e=re(t);return(e.local?sr:ar)(e)}function cr(){}function Ce(t){return t==null?cr:function(){return this.querySelector(t)}}function ur(t){typeof t!="function"&&(t=Ce(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,c=r[i]=new Array(o),l,f,u=0;u<o;++u)(l=a[u])&&(f=t.call(l,l.__data__,u,a))&&("__data__"in l&&(f.__data__=l.__data__),c[u]=f);return new st(r,this._parents)}function lr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function fr(){return[]}function tn(t){return t==null?fr:function(){return this.querySelectorAll(t)}}function hr(t){return function(){return lr(t.apply(this,arguments))}}function dr(t){typeof t=="function"?t=hr(t):t=tn(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],c=o.length,l,f=0;f<c;++f)(l=o[f])&&(r.push(t.call(l,l.__data__,f,o)),i.push(l));return new st(r,i)}function en(t){return function(){return this.matches(t)}}function nn(t){return function(e){return e.matches(t)}}var pr=Array.prototype.find;function _r(t){return function(){return pr.call(this.children,t)}}function gr(){return this.firstElementChild}function vr(t){return this.select(t==null?gr:_r(typeof t=="function"?t:nn(t)))}var mr=Array.prototype.filter;function yr(){return Array.from(this.children)}function wr(t){return function(){return mr.call(this.children,t)}}function xr(t){return this.selectAll(t==null?yr:wr(typeof t=="function"?t:nn(t)))}function br(t){typeof t!="function"&&(t=en(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,c=r[i]=[],l,f=0;f<o;++f)(l=a[f])&&t.call(l,l.__data__,f,a)&&c.push(l);return new st(r,this._parents)}function rn(t){return new Array(t.length)}function Er(){return new st(this._enter||this._groups.map(rn),this._parents)}function ie(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ie.prototype={constructor:ie,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Sr(t){return function(){return t}}function Rr(t,e,n,r,i,a){for(var o=0,c,l=e.length,f=a.length;o<f;++o)(c=e[o])?(c.__data__=a[o],r[o]=c):n[o]=new ie(t,a[o]);for(;o<l;++o)(c=e[o])&&(i[o]=c)}function Tr(t,e,n,r,i,a,o){var c,l,f=new Map,u=e.length,p=a.length,m=new Array(u),w;for(c=0;c<u;++c)(l=e[c])&&(m[c]=w=o.call(l,l.__data__,c,e)+"",f.has(w)?i[c]=l:f.set(w,l));for(c=0;c<p;++c)w=o.call(t,a[c],c,a)+"",(l=f.get(w))?(r[c]=l,l.__data__=a[c],f.delete(w)):n[c]=new ie(t,a[c]);for(c=0;c<u;++c)(l=e[c])&&f.get(m[c])===l&&(i[c]=l)}function Cr(t){return t.__data__}function Or(t,e){if(!arguments.length)return Array.from(this,Cr);var n=e?Tr:Rr,r=this._parents,i=this._groups;typeof t!="function"&&(t=Sr(t));for(var a=i.length,o=new Array(a),c=new Array(a),l=new Array(a),f=0;f<a;++f){var u=r[f],p=i[f],m=p.length,w=Nr(t.call(u,u&&u.__data__,f,r)),z=w.length,R=c[f]=new Array(z),A=o[f]=new Array(z),E=l[f]=new Array(m);n(u,p,R,A,E,w,e);for(var I=0,$=0,B,U;I<z;++I)if(B=R[I]){for(I>=$&&($=I+1);!(U=A[$])&&++$<z;);B._next=U||null}}return o=new st(o,r),o._enter=c,o._exit=l,o}function Nr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zr(){return new st(this._exit||this._groups.map(rn),this._parents)}function Ar(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Ir(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),c=new Array(i),l=0;l<o;++l)for(var f=n[l],u=r[l],p=f.length,m=c[l]=new Array(p),w,z=0;z<p;++z)(w=f[z]||u[z])&&(m[z]=w);for(;l<i;++l)c[l]=n[l];return new st(c,this._parents)}function Mr(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Pr(t){t||(t=kr);function e(p,m){return p&&m?t(p.__data__,m.__data__):!p-!m}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],c=o.length,l=i[a]=new Array(c),f,u=0;u<c;++u)(f=o[u])&&(l[u]=f);l.sort(e)}return new st(i,this._parents).order()}function kr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Dr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Lr(){return Array.from(this)}function Fr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Yr(){let t=0;for(const e of this)++t;return t}function Xr(){return!this.node()}function Hr(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,c;a<o;++a)(c=i[a])&&t.call(c,c.__data__,a,i);return this}function Ur(t){return function(){this.removeAttribute(t)}}function Vr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wr(t,e){return function(){this.setAttribute(t,e)}}function $r(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function jr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Gr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Kr(t,e){var n=re(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Vr:Ur:typeof e=="function"?n.local?Gr:jr:n.local?$r:Wr)(n,e))}function on(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Br(t){return function(){this.style.removeProperty(t)}}function Zr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Jr(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function qr(t,e,n){return arguments.length>1?this.each((e==null?Br:typeof e=="function"?Jr:Zr)(t,e,n??"")):Mt(this.node(),t)}function Mt(t,e){return t.style.getPropertyValue(e)||on(t).getComputedStyle(t,null).getPropertyValue(e)}function Qr(t){return function(){delete this[t]}}function ti(t,e){return function(){this[t]=e}}function ei(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ni(t,e){return arguments.length>1?this.each((e==null?Qr:typeof e=="function"?ei:ti)(t,e)):this.node()[t]}function an(t){return t.trim().split(/^|\s+/)}function Oe(t){return t.classList||new sn(t)}function sn(t){this._node=t,this._names=an(t.getAttribute("class")||"")}sn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function cn(t,e){for(var n=Oe(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function un(t,e){for(var n=Oe(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ri(t){return function(){cn(this,t)}}function ii(t){return function(){un(this,t)}}function oi(t,e){return function(){(e.apply(this,arguments)?cn:un)(this,t)}}function ai(t,e){var n=an(t+"");if(arguments.length<2){for(var r=Oe(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?oi:e?ri:ii)(n,e))}function si(){this.textContent=""}function ci(t){return function(){this.textContent=t}}function ui(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function li(t){return arguments.length?this.each(t==null?si:(typeof t=="function"?ui:ci)(t)):this.node().textContent}function fi(){this.innerHTML=""}function hi(t){return function(){this.innerHTML=t}}function di(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function pi(t){return arguments.length?this.each(t==null?fi:(typeof t=="function"?di:hi)(t)):this.node().innerHTML}function _i(){this.nextSibling&&this.parentNode.appendChild(this)}function gi(){return this.each(_i)}function vi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mi(){return this.each(vi)}function yi(t){var e=typeof t=="function"?t:Qe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function wi(){return null}function xi(t,e){var n=typeof t=="function"?t:Qe(t),r=e==null?wi:typeof e=="function"?e:Ce(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function bi(){var t=this.parentNode;t&&t.removeChild(this)}function Ei(){return this.each(bi)}function Si(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ri(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ti(t){return this.select(t?Ri:Si)}function Ci(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Oi(t){return function(e){t.call(this,e,this.__data__)}}function Ni(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function zi(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Ai(t,e,n){return function(){var r=this.__on,i,a=Oi(e);if(r){for(var o=0,c=r.length;o<c;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Ii(t,e,n){var r=Ni(t+""),i,a=r.length,o;if(arguments.length<2){var c=this.node().__on;if(c){for(var l=0,f=c.length,u;l<f;++l)for(i=0,u=c[l];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(c=e?Ai:zi,i=0;i<a;++i)this.each(c(r[i],e,n));return this}function ln(t,e,n){var r=on(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Mi(t,e){return function(){return ln(this,t,e)}}function Pi(t,e){return function(){return ln(this,t,e.apply(this,arguments))}}function ki(t,e){return this.each((typeof e=="function"?Pi:Mi)(t,e))}function*Di(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var fn=[null];function st(t,e){this._groups=t,this._parents=e}function Wt(){return new st([[document.documentElement]],fn)}function Li(){return this}st.prototype=Wt.prototype={constructor:st,select:ur,selectAll:dr,selectChild:vr,selectChildren:xr,filter:br,data:Or,enter:Er,exit:zr,join:Ar,merge:Ir,selection:Li,order:Mr,sort:Pr,call:Dr,nodes:Lr,node:Fr,size:Yr,empty:Xr,each:Hr,attr:Kr,style:qr,property:ni,classed:ai,text:li,html:pi,raise:gi,lower:mi,append:yi,insert:xi,remove:Ei,clone:Ti,datum:Ci,on:Ii,dispatch:ki,[Symbol.iterator]:Di};function tt(t){return typeof t=="string"?new st([[document.querySelector(t)]],[document.documentElement]):new st([[t]],fn)}function Fi(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Et(t,e){if(t=Fi(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var Yi={value:()=>{}};function Ne(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new oe(n)}function oe(t){this._=t}function Xi(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}oe.prototype=Ne.prototype={constructor:oe,on:function(t,e){var n=this._,r=Xi(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=Hi(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=hn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=hn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new oe(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Hi(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function hn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Yi,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const ze={capture:!0,passive:!1};function Ae(t){t.preventDefault(),t.stopImmediatePropagation()}function Ui(t){var e=t.document.documentElement,n=tt(t).on("dragstart.drag",Ae,ze);"onselectstart"in e?n.on("selectstart.drag",Ae,ze):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Vi(t,e){var n=t.document.documentElement,r=tt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ae,ze),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ie(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function dn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function $t(){}var jt=.7,ae=1/jt,Pt="\\s*([+-]?\\d+)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wi=/^#([0-9a-f]{3,8})$/,$i=new RegExp(`^rgb\\(${Pt},${Pt},${Pt}\\)$`),ji=new RegExp(`^rgb\\(${_t},${_t},${_t}\\)$`),Gi=new RegExp(`^rgba\\(${Pt},${Pt},${Pt},${Gt}\\)$`),Ki=new RegExp(`^rgba\\(${_t},${_t},${_t},${Gt}\\)$`),Bi=new RegExp(`^hsl\\(${Gt},${_t},${_t}\\)$`),Zi=new RegExp(`^hsla\\(${Gt},${_t},${_t},${Gt}\\)$`),pn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ie($t,Kt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_n,formatHex:_n,formatHex8:Ji,formatHsl:qi,formatRgb:gn,toString:gn});function _n(){return this.rgb().formatHex()}function Ji(){return this.rgb().formatHex8()}function qi(){return xn(this).formatHsl()}function gn(){return this.rgb().formatRgb()}function Kt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Wi.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?vn(e):n===3?new at(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?se(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?se(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$i.exec(t))?new at(e[1],e[2],e[3],1):(e=ji.exec(t))?new at(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Gi.exec(t))?se(e[1],e[2],e[3],e[4]):(e=Ki.exec(t))?se(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Bi.exec(t))?wn(e[1],e[2]/100,e[3]/100,1):(e=Zi.exec(t))?wn(e[1],e[2]/100,e[3]/100,e[4]):pn.hasOwnProperty(t)?vn(pn[t]):t==="transparent"?new at(NaN,NaN,NaN,0):null}function vn(t){return new at(t>>16&255,t>>8&255,t&255,1)}function se(t,e,n,r){return r<=0&&(t=e=n=NaN),new at(t,e,n,r)}function Qi(t){return t instanceof $t||(t=Kt(t)),t?(t=t.rgb(),new at(t.r,t.g,t.b,t.opacity)):new at}function Me(t,e,n,r){return arguments.length===1?Qi(t):new at(t,e,n,r??1)}function at(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ie(at,Me,dn($t,{brighter(t){return t=t==null?ae:Math.pow(ae,t),new at(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?jt:Math.pow(jt,t),new at(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new at(Tt(this.r),Tt(this.g),Tt(this.b),ce(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mn,formatHex:mn,formatHex8:to,formatRgb:yn,toString:yn}));function mn(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}`}function to(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}${Ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function yn(){const t=ce(this.opacity);return`${t===1?"rgb(":"rgba("}${Tt(this.r)}, ${Tt(this.g)}, ${Tt(this.b)}${t===1?")":`, ${t})`}`}function ce(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Tt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ct(t){return t=Tt(t),(t<16?"0":"")+t.toString(16)}function wn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ht(t,e,n,r)}function xn(t){if(t instanceof ht)return new ht(t.h,t.s,t.l,t.opacity);if(t instanceof $t||(t=Kt(t)),!t)return new ht;if(t instanceof ht)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,c=a-i,l=(a+i)/2;return c?(e===a?o=(n-r)/c+(n<r)*6:n===a?o=(r-e)/c+2:o=(e-n)/c+4,c/=l<.5?a+i:2-a-i,o*=60):c=l>0&&l<1?0:o,new ht(o,c,l,t.opacity)}function eo(t,e,n,r){return arguments.length===1?xn(t):new ht(t,e,n,r??1)}function ht(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ie(ht,eo,dn($t,{brighter(t){return t=t==null?ae:Math.pow(ae,t),new ht(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?jt:Math.pow(jt,t),new ht(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new at(Pe(t>=240?t-240:t+120,i,r),Pe(t,i,r),Pe(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ht(bn(this.h),ue(this.s),ue(this.l),ce(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ce(this.opacity);return`${t===1?"hsl(":"hsla("}${bn(this.h)}, ${ue(this.s)*100}%, ${ue(this.l)*100}%${t===1?")":`, ${t})`}`}}));function bn(t){return t=(t||0)%360,t<0?t+360:t}function ue(t){return Math.max(0,Math.min(1,t||0))}function Pe(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const En=t=>()=>t;function no(t,e){return function(n){return t+n*e}}function ro(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function io(t){return(t=+t)==1?Sn:function(e,n){return n-e?ro(e,n,t):En(isNaN(e)?n:e)}}function Sn(t,e){var n=e-t;return n?no(t,n):En(isNaN(t)?e:t)}const Rn=function t(e){var n=io(e);function r(i,a){var o=n((i=Me(i)).r,(a=Me(a)).r),c=n(i.g,a.g),l=n(i.b,a.b),f=Sn(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=c(u),i.b=l(u),i.opacity=f(u),i+""}}return r.gamma=t,r}(1);function St(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ke=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,De=new RegExp(ke.source,"g");function oo(t){return function(){return t}}function ao(t){return function(e){return t(e)+""}}function so(t,e){var n=ke.lastIndex=De.lastIndex=0,r,i,a,o=-1,c=[],l=[];for(t=t+"",e=e+"";(r=ke.exec(t))&&(i=De.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),c[o]?c[o]+=a:c[++o]=a),(r=r[0])===(i=i[0])?c[o]?c[o]+=i:c[++o]=i:(c[++o]=null,l.push({i:o,x:St(r,i)})),n=De.lastIndex;return n<e.length&&(a=e.slice(n),c[o]?c[o]+=a:c[++o]=a),c.length<2?l[0]?ao(l[0].x):oo(e):(e=l.length,function(f){for(var u=0,p;u<e;++u)c[(p=l[u]).i]=p.x(f);return c.join("")})}var Tn=180/Math.PI,Le={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cn(t,e,n,r,i,a){var o,c,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,l/=c),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Tn,skewX:Math.atan(l)*Tn,scaleX:o,scaleY:c}}var le;function co(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Le:Cn(e.a,e.b,e.c,e.d,e.e,e.f)}function uo(t){return t==null||(le||(le=document.createElementNS("http://www.w3.org/2000/svg","g")),le.setAttribute("transform",t),!(t=le.transform.baseVal.consolidate()))?Le:(t=t.matrix,Cn(t.a,t.b,t.c,t.d,t.e,t.f))}function On(t,e,n,r){function i(f){return f.length?f.pop()+" ":""}function a(f,u,p,m,w,z){if(f!==p||u!==m){var R=w.push("translate(",null,e,null,n);z.push({i:R-4,x:St(f,p)},{i:R-2,x:St(u,m)})}else(p||m)&&w.push("translate("+p+e+m+n)}function o(f,u,p,m){f!==u?(f-u>180?u+=360:u-f>180&&(f+=360),m.push({i:p.push(i(p)+"rotate(",null,r)-2,x:St(f,u)})):u&&p.push(i(p)+"rotate("+u+r)}function c(f,u,p,m){f!==u?m.push({i:p.push(i(p)+"skewX(",null,r)-2,x:St(f,u)}):u&&p.push(i(p)+"skewX("+u+r)}function l(f,u,p,m,w,z){if(f!==p||u!==m){var R=w.push(i(w)+"scale(",null,",",null,")");z.push({i:R-4,x:St(f,p)},{i:R-2,x:St(u,m)})}else(p!==1||m!==1)&&w.push(i(w)+"scale("+p+","+m+")")}return function(f,u){var p=[],m=[];return f=t(f),u=t(u),a(f.translateX,f.translateY,u.translateX,u.translateY,p,m),o(f.rotate,u.rotate,p,m),c(f.skewX,u.skewX,p,m),l(f.scaleX,f.scaleY,u.scaleX,u.scaleY,p,m),f=u=null,function(w){for(var z=-1,R=m.length,A;++z<R;)p[(A=m[z]).i]=A.x(w);return p.join("")}}}var lo=On(co,"px, ","px)","deg)"),fo=On(uo,", ",")",")"),ho=1e-12;function Nn(t){return((t=Math.exp(t))+1/t)/2}function po(t){return((t=Math.exp(t))-1/t)/2}function _o(t){return((t=Math.exp(2*t))-1)/(t+1)}const go=function t(e,n,r){function i(a,o){var c=a[0],l=a[1],f=a[2],u=o[0],p=o[1],m=o[2],w=u-c,z=p-l,R=w*w+z*z,A,E;if(R<ho)E=Math.log(m/f)/e,A=function(L){return[c+L*w,l+L*z,f*Math.exp(e*L*E)]};else{var I=Math.sqrt(R),$=(m*m-f*f+r*R)/(2*f*n*I),B=(m*m-f*f-r*R)/(2*m*n*I),U=Math.log(Math.sqrt($*$+1)-$),D=Math.log(Math.sqrt(B*B+1)-B);E=(D-U)/e,A=function(L){var F=L*E,j=Nn(U),rt=f/(n*I)*(j*_o(e*F+U)-po(U));return[c+rt*w,l+rt*z,f*j/Nn(e*F+U)]}}return A.duration=E*1e3*e/Math.SQRT2,A}return i.rho=function(a){var o=Math.max(.001,+a),c=o*o,l=c*c;return t(o,c,l)},i}(Math.SQRT2,2,4);var kt=0,Bt=0,Zt=0,zn=1e3,fe,Jt,he=0,Ot=0,de=0,qt=typeof performance=="object"&&performance.now?performance:Date,An=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Fe(){return Ot||(An(vo),Ot=qt.now()+de)}function vo(){Ot=0}function pe(){this._call=this._time=this._next=null}pe.prototype=In.prototype={constructor:pe,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Fe():+n)+(e==null?0:+e),!this._next&&Jt!==this&&(Jt?Jt._next=this:fe=this,Jt=this),this._call=t,this._time=n,Ye()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ye())}};function In(t,e,n){var r=new pe;return r.restart(t,e,n),r}function mo(){Fe(),++kt;for(var t=fe,e;t;)(e=Ot-t._time)>=0&&t._call.call(void 0,e),t=t._next;--kt}function Mn(){Ot=(he=qt.now())+de,kt=Bt=0;try{mo()}finally{kt=0,wo(),Ot=0}}function yo(){var t=qt.now(),e=t-he;e>zn&&(de-=e,he=t)}function wo(){for(var t,e=fe,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:fe=n);Jt=t,Ye(r)}function Ye(t){if(!kt){Bt&&(Bt=clearTimeout(Bt));var e=t-Ot;e>24?(t<1/0&&(Bt=setTimeout(Mn,t-qt.now()-de)),Zt&&(Zt=clearInterval(Zt))):(Zt||(he=qt.now(),Zt=setInterval(yo,zn)),kt=1,An(Mn))}}function Pn(t,e,n){var r=new pe;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var xo=Ne("start","end","cancel","interrupt"),bo=[],kn=0,Dn=1,Xe=2,_e=3,Ln=4,He=5,ge=6;function ve(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Eo(t,n,{name:e,index:r,group:i,on:xo,tween:bo,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:kn})}function Ue(t,e){var n=dt(t,e);if(n.state>kn)throw new Error("too late; already scheduled");return n}function gt(t,e){var n=dt(t,e);if(n.state>_e)throw new Error("too late; already running");return n}function dt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Eo(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=In(a,0,n.time);function a(f){n.state=Dn,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var u,p,m,w;if(n.state!==Dn)return l();for(u in r)if(w=r[u],w.name===n.name){if(w.state===_e)return Pn(o);w.state===Ln?(w.state=ge,w.timer.stop(),w.on.call("interrupt",t,t.__data__,w.index,w.group),delete r[u]):+u<e&&(w.state=ge,w.timer.stop(),w.on.call("cancel",t,t.__data__,w.index,w.group),delete r[u])}if(Pn(function(){n.state===_e&&(n.state=Ln,n.timer.restart(c,n.delay,n.time),c(f))}),n.state=Xe,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Xe){for(n.state=_e,i=new Array(m=n.tween.length),u=0,p=-1;u<m;++u)(w=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++p]=w);i.length=p+1}}function c(f){for(var u=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(l),n.state=He,1),p=-1,m=i.length;++p<m;)i[p].call(t,u);n.state===He&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=ge,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function me(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>Xe&&r.state<He,r.state=ge,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function So(t){return this.each(function(){me(this,t)})}function Ro(t,e){var n,r;return function(){var i=gt(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,c=r.length;o<c;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function To(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=gt(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var c={name:e,value:n},l=0,f=i.length;l<f;++l)if(i[l].name===e){i[l]=c;break}l===f&&i.push(c)}a.tween=i}}function Co(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=dt(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Ro:To)(n,t,e))}function Ve(t,e,n){var r=t._id;return t.each(function(){var i=gt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return dt(i,r).value[e]}}function Fn(t,e){var n;return(typeof e=="number"?St:e instanceof Kt?Rn:(n=Kt(e))?(e=n,Rn):so)(t,e)}function Oo(t){return function(){this.removeAttribute(t)}}function No(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zo(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function Ao(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function Io(t,e,n){var r,i,a;return function(){var o,c=n(this),l;return c==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=c+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,c)))}}function Mo(t,e,n){var r,i,a;return function(){var o,c=n(this),l;return c==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=c+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,c)))}}function Po(t,e){var n=re(t),r=n==="transform"?fo:Fn;return this.attrTween(t,typeof e=="function"?(n.local?Mo:Io)(n,r,Ve(this,"attr."+t,e)):e==null?(n.local?No:Oo)(n):(n.local?Ao:zo)(n,r,e))}function ko(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Do(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Lo(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Do(t,a)),n}return i._value=e,i}function Fo(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&ko(t,a)),n}return i._value=e,i}function Yo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=re(t);return this.tween(n,(r.local?Lo:Fo)(r,e))}function Xo(t,e){return function(){Ue(this,t).delay=+e.apply(this,arguments)}}function Ho(t,e){return e=+e,function(){Ue(this,t).delay=e}}function Uo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Xo:Ho)(e,t)):dt(this.node(),e).delay}function Vo(t,e){return function(){gt(this,t).duration=+e.apply(this,arguments)}}function Wo(t,e){return e=+e,function(){gt(this,t).duration=e}}function $o(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Vo:Wo)(e,t)):dt(this.node(),e).duration}function jo(t,e){if(typeof e!="function")throw new Error;return function(){gt(this,t).ease=e}}function Go(t){var e=this._id;return arguments.length?this.each(jo(e,t)):dt(this.node(),e).ease}function Ko(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;gt(this,t).ease=n}}function Bo(t){if(typeof t!="function")throw new Error;return this.each(Ko(this._id,t))}function Zo(t){typeof t!="function"&&(t=en(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,c=r[i]=[],l,f=0;f<o;++f)(l=a[f])&&t.call(l,l.__data__,f,a)&&c.push(l);return new vt(r,this._parents,this._name,this._id)}function Jo(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),c=0;c<a;++c)for(var l=e[c],f=n[c],u=l.length,p=o[c]=new Array(u),m,w=0;w<u;++w)(m=l[w]||f[w])&&(p[w]=m);for(;c<r;++c)o[c]=e[c];return new vt(o,this._parents,this._name,this._id)}function qo(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Qo(t,e,n){var r,i,a=qo(e)?Ue:gt;return function(){var o=a(this,t),c=o.on;c!==r&&(i=(r=c).copy()).on(e,n),o.on=i}}function ta(t,e){var n=this._id;return arguments.length<2?dt(this.node(),n).on.on(t):this.each(Qo(n,t,e))}function ea(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function na(){return this.on("end.remove",ea(this._id))}function ra(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ce(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var c=r[o],l=c.length,f=a[o]=new Array(l),u,p,m=0;m<l;++m)(u=c[m])&&(p=t.call(u,u.__data__,m,c))&&("__data__"in u&&(p.__data__=u.__data__),f[m]=p,ve(f[m],e,n,m,f,dt(u,n)));return new vt(a,this._parents,e,n)}function ia(t){var e=this._name,n=this._id;typeof t!="function"&&(t=tn(t));for(var r=this._groups,i=r.length,a=[],o=[],c=0;c<i;++c)for(var l=r[c],f=l.length,u,p=0;p<f;++p)if(u=l[p]){for(var m=t.call(u,u.__data__,p,l),w,z=dt(u,n),R=0,A=m.length;R<A;++R)(w=m[R])&&ve(w,e,n,R,m,z);a.push(m),o.push(u)}return new vt(a,o,e,n)}var oa=Wt.prototype.constructor;function aa(){return new oa(this._groups,this._parents)}function sa(t,e){var n,r,i;return function(){var a=Mt(this,t),o=(this.style.removeProperty(t),Mt(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function Yn(t){return function(){this.style.removeProperty(t)}}function ca(t,e,n){var r,i=n+"",a;return function(){var o=Mt(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function ua(t,e,n){var r,i,a;return function(){var o=Mt(this,t),c=n(this),l=c+"";return c==null&&(l=c=(this.style.removeProperty(t),Mt(this,t))),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,c))}}function la(t,e){var n,r,i,a="style."+e,o="end."+a,c;return function(){var l=gt(this,t),f=l.on,u=l.value[a]==null?c||(c=Yn(e)):void 0;(f!==n||i!==u)&&(r=(n=f).copy()).on(o,i=u),l.on=r}}function fa(t,e,n){var r=(t+="")=="transform"?lo:Fn;return e==null?this.styleTween(t,sa(t,r)).on("end.style."+t,Yn(t)):typeof e=="function"?this.styleTween(t,ua(t,r,Ve(this,"style."+t,e))).each(la(this._id,t)):this.styleTween(t,ca(t,r,e),n).on("end.style."+t,null)}function ha(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function da(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&ha(t,o,n)),r}return a._value=e,a}function pa(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,da(t,e,n??""))}function _a(t){return function(){this.textContent=t}}function ga(t){return function(){var e=t(this);this.textContent=e??""}}function va(t){return this.tween("text",typeof t=="function"?ga(Ve(this,"text",t)):_a(t==null?"":t+""))}function ma(t){return function(e){this.textContent=t.call(this,e)}}function ya(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&ma(i)),e}return r._value=t,r}function wa(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ya(t))}function xa(){for(var t=this._name,e=this._id,n=Xn(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],c=o.length,l,f=0;f<c;++f)if(l=o[f]){var u=dt(l,e);ve(l,t,n,f,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new vt(r,this._parents,t,n)}function ba(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var c={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var f=gt(this,r),u=f.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(l)),f.on=e}),i===0&&a()})}var Ea=0;function vt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Xn(){return++Ea}var mt=Wt.prototype;vt.prototype={constructor:vt,select:ra,selectAll:ia,selectChild:mt.selectChild,selectChildren:mt.selectChildren,filter:Zo,merge:Jo,selection:aa,transition:xa,call:mt.call,nodes:mt.nodes,node:mt.node,size:mt.size,empty:mt.empty,each:mt.each,on:ta,attr:Po,attrTween:Yo,style:fa,styleTween:pa,text:va,textTween:wa,remove:na,tween:Co,delay:Uo,duration:$o,ease:Go,easeVarying:Bo,end:ba,[Symbol.iterator]:mt[Symbol.iterator]};function Sa(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ra={time:null,delay:0,duration:250,ease:Sa};function Ta(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Ca(t){var e,n;t instanceof vt?(e=t._id,t=t._name):(e=Xn(),(n=Ra).time=Fe(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],c=o.length,l,f=0;f<c;++f)(l=o[f])&&ve(l,t,e,f,o,n||Ta(l,e));return new vt(r,this._parents,t,e)}Wt.prototype.interrupt=So,Wt.prototype.transition=Ca;const ye=t=>()=>t;function Oa(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function yt(t,e,n){this.k=t,this.x=e,this.y=n}yt.prototype={constructor:yt,scale:function(t){return t===1?this:new yt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new yt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Dt=new yt(1,0,0);yt.prototype;function We(t){t.stopImmediatePropagation()}function Qt(t){t.preventDefault(),t.stopImmediatePropagation()}function Na(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function za(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Hn(){return this.__zoom||Dt}function Aa(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ia(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ma(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function Un(){var t=Na,e=za,n=Ma,r=Aa,i=Ia,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],c=250,l=go,f=Ne("start","zoom","end"),u,p,m,w=500,z=150,R=0,A=10;function E(h){h.property("__zoom",Hn).on("wheel.zoom",F,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",rt).filter(i).on("touchstart.zoom",ut).on("touchmove.zoom",Q).on("touchend.zoom touchcancel.zoom",nt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(h,b,d,g){var v=h.selection?h.selection():h;v.property("__zoom",Hn),h!==v?U(h,b,d,g):v.interrupt().each(function(){D(this,arguments).event(g).start().zoom(null,typeof b=="function"?b.apply(this,arguments):b).end()})},E.scaleBy=function(h,b,d,g){E.scaleTo(h,function(){var v=this.__zoom.k,y=typeof b=="function"?b.apply(this,arguments):b;return v*y},d,g)},E.scaleTo=function(h,b,d,g){E.transform(h,function(){var v=e.apply(this,arguments),y=this.__zoom,S=d==null?B(v):typeof d=="function"?d.apply(this,arguments):d,T=y.invert(S),C=typeof b=="function"?b.apply(this,arguments):b;return n($(I(y,C),S,T),v,o)},d,g)},E.translateBy=function(h,b,d,g){E.transform(h,function(){return n(this.__zoom.translate(typeof b=="function"?b.apply(this,arguments):b,typeof d=="function"?d.apply(this,arguments):d),e.apply(this,arguments),o)},null,g)},E.translateTo=function(h,b,d,g,v){E.transform(h,function(){var y=e.apply(this,arguments),S=this.__zoom,T=g==null?B(y):typeof g=="function"?g.apply(this,arguments):g;return n(Dt.translate(T[0],T[1]).scale(S.k).translate(typeof b=="function"?-b.apply(this,arguments):-b,typeof d=="function"?-d.apply(this,arguments):-d),y,o)},g,v)};function I(h,b){return b=Math.max(a[0],Math.min(a[1],b)),b===h.k?h:new yt(b,h.x,h.y)}function $(h,b,d){var g=b[0]-d[0]*h.k,v=b[1]-d[1]*h.k;return g===h.x&&v===h.y?h:new yt(h.k,g,v)}function B(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function U(h,b,d,g){h.on("start.zoom",function(){D(this,arguments).event(g).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(g).end()}).tween("zoom",function(){var v=this,y=arguments,S=D(v,y).event(g),T=e.apply(v,y),C=d==null?B(T):typeof d=="function"?d.apply(v,y):d,X=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),P=v.__zoom,W=typeof b=="function"?b.apply(v,y):b,H=l(P.invert(C).concat(X/P.k),W.invert(C).concat(X/W.k));return function(G){if(G===1)G=W;else{var Z=H(G),it=X/Z[2];G=new yt(it,C[0]-Z[0]*it,C[1]-Z[1]*it)}S.zoom(null,G)}})}function D(h,b,d){return!d&&h.__zooming||new L(h,b)}function L(h,b){this.that=h,this.args=b,this.active=0,this.sourceEvent=null,this.extent=e.apply(h,b),this.taps=0}L.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,b){return this.mouse&&h!=="mouse"&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var b=tt(this.that).datum();f.call(h,this.that,new Oa(h,{sourceEvent:this.sourceEvent,target:E,type:h,transform:this.that.__zoom,dispatch:f}),b)}};function F(h,...b){if(!t.apply(this,arguments))return;var d=D(this,b).event(h),g=this.__zoom,v=Math.max(a[0],Math.min(a[1],g.k*Math.pow(2,r.apply(this,arguments)))),y=Et(h);if(d.wheel)(d.mouse[0][0]!==y[0]||d.mouse[0][1]!==y[1])&&(d.mouse[1]=g.invert(d.mouse[0]=y)),clearTimeout(d.wheel);else{if(g.k===v)return;d.mouse=[y,g.invert(y)],me(this),d.start()}Qt(h),d.wheel=setTimeout(S,z),d.zoom("mouse",n($(I(g,v),d.mouse[0],d.mouse[1]),d.extent,o));function S(){d.wheel=null,d.end()}}function j(h,...b){if(m||!t.apply(this,arguments))return;var d=h.currentTarget,g=D(this,b,!0).event(h),v=tt(h.view).on("mousemove.zoom",C,!0).on("mouseup.zoom",X,!0),y=Et(h,d),S=h.clientX,T=h.clientY;Ui(h.view),We(h),g.mouse=[y,this.__zoom.invert(y)],me(this),g.start();function C(P){if(Qt(P),!g.moved){var W=P.clientX-S,H=P.clientY-T;g.moved=W*W+H*H>R}g.event(P).zoom("mouse",n($(g.that.__zoom,g.mouse[0]=Et(P,d),g.mouse[1]),g.extent,o))}function X(P){v.on("mousemove.zoom mouseup.zoom",null),Vi(P.view,g.moved),Qt(P),g.event(P).end()}}function rt(h,...b){if(t.apply(this,arguments)){var d=this.__zoom,g=Et(h.changedTouches?h.changedTouches[0]:h,this),v=d.invert(g),y=d.k*(h.shiftKey?.5:2),S=n($(I(d,y),g,v),e.apply(this,b),o);Qt(h),c>0?tt(this).transition().duration(c).call(U,S,g,h):tt(this).call(E.transform,S,g,h)}}function ut(h,...b){if(t.apply(this,arguments)){var d=h.touches,g=d.length,v=D(this,b,h.changedTouches.length===g).event(h),y,S,T,C;for(We(h),S=0;S<g;++S)T=d[S],C=Et(T,this),C=[C,this.__zoom.invert(C),T.identifier],v.touch0?!v.touch1&&v.touch0[2]!==C[2]&&(v.touch1=C,v.taps=0):(v.touch0=C,y=!0,v.taps=1+!!u);u&&(u=clearTimeout(u)),y&&(v.taps<2&&(p=C[0],u=setTimeout(function(){u=null},w)),me(this),v.start())}}function Q(h,...b){if(this.__zooming){var d=D(this,b).event(h),g=h.changedTouches,v=g.length,y,S,T,C;for(Qt(h),y=0;y<v;++y)S=g[y],T=Et(S,this),d.touch0&&d.touch0[2]===S.identifier?d.touch0[0]=T:d.touch1&&d.touch1[2]===S.identifier&&(d.touch1[0]=T);if(S=d.that.__zoom,d.touch1){var X=d.touch0[0],P=d.touch0[1],W=d.touch1[0],H=d.touch1[1],G=(G=W[0]-X[0])*G+(G=W[1]-X[1])*G,Z=(Z=H[0]-P[0])*Z+(Z=H[1]-P[1])*Z;S=I(S,Math.sqrt(G/Z)),T=[(X[0]+W[0])/2,(X[1]+W[1])/2],C=[(P[0]+H[0])/2,(P[1]+H[1])/2]}else if(d.touch0)T=d.touch0[0],C=d.touch0[1];else return;d.zoom("touch",n($(S,T,C),d.extent,o))}}function nt(h,...b){if(this.__zooming){var d=D(this,b).event(h),g=h.changedTouches,v=g.length,y,S;for(We(h),m&&clearTimeout(m),m=setTimeout(function(){m=null},w),y=0;y<v;++y)S=g[y],d.touch0&&d.touch0[2]===S.identifier?delete d.touch0:d.touch1&&d.touch1[2]===S.identifier&&delete d.touch1;if(d.touch1&&!d.touch0&&(d.touch0=d.touch1,delete d.touch1),d.touch0)d.touch0[1]=this.__zoom.invert(d.touch0[0]);else if(d.end(),d.taps===2&&(S=Et(S,this),Math.hypot(p[0]-S[0],p[1]-S[1])<A)){var T=tt(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return E.wheelDelta=function(h){return arguments.length?(r=typeof h=="function"?h:ye(+h),E):r},E.filter=function(h){return arguments.length?(t=typeof h=="function"?h:ye(!!h),E):t},E.touchable=function(h){return arguments.length?(i=typeof h=="function"?h:ye(!!h),E):i},E.extent=function(h){return arguments.length?(e=typeof h=="function"?h:ye([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),E):e},E.scaleExtent=function(h){return arguments.length?(a[0]=+h[0],a[1]=+h[1],E):[a[0],a[1]]},E.translateExtent=function(h){return arguments.length?(o[0][0]=+h[0][0],o[1][0]=+h[1][0],o[0][1]=+h[0][1],o[1][1]=+h[1][1],E):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},E.constrain=function(h){return arguments.length?(n=h,E):n},E.duration=function(h){return arguments.length?(c=+h,E):c},E.interpolate=function(h){return arguments.length?(l=h,E):l},E.on=function(){var h=f.on.apply(f,arguments);return h===f?E:h},E.clickDistance=function(h){return arguments.length?(R=(h=+h)*h,E):Math.sqrt(R)},E.tapDistance=function(h){return arguments.length?(A=+h,E):A},E}const et={DEFAULT_MIN_ZOOM:.1,DEFAULT_MAX_ZOOM:4,FIT_TO_VIEW_MAX_ZOOM:1,ZOOM_RATIO:.5,TIME_FRAME:500,INITIAL_POSITION_X:0,INITIAL_POSITION_Y:0,SCROLL_POS_RATIO:3,LAYOUT_FALLBACK:500,DEFAULT_LAYOUT:1e6,INITIAL_SCROLLBAR_SIZE:50,MIN_SCROLLBAR_SIZE:15,SCROLL_DELTA_DIFF:1.5,NODE_Y_OFFSET:110},te={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center"},ct={...te,TOP_CENTER:"top-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_RIGHT:"center-right",CENTER_CENTER:"center-center"},Lt=({value:t,min:e=0,max:n})=>Math.min(Math.max(t,e),n),Pa=({position:t,svgBounds:e,nodeBounds:n,currentTranslateX:r,currentTranslateY:i,currentScale:a,updatedScale:o,customOffset:c})=>{let[l,f,u]=[0,0,1];switch(o!==a&&(u=o/a,r*=u,i*=u),t){case ct.TOP_LEFT:return{updatedX:r+((e.x-n.x)*u+c.x),updatedY:i+((e.y-n.y)*u+c.y)};case ct.TOP_CENTER:return l=e.width/2-(n.x*u+n.width*u/2)+e.x,{updatedX:r+l+c.x,updatedY:i+((e.y-n.y)*u+c.y)};case ct.TOP_RIGHT:return{updatedX:r+(e.width-(Math.abs(e.x-n.x*u)+n.width*u))+c.x,updatedY:i+((e.y-n.y)*u+c.y)};case ct.CENTER_LEFT:return f=e.height/2-(Math.abs(e.y-n.y)*u+n.height*u/2),{updatedX:r+((e.x-n.x)*u+c.x),updatedY:i+f+c.y};case ct.CENTER_CENTER:return l=e.width/2-(Math.abs(e.x-n.x)*u+n.width*u/2),f=e.height/2-(Math.abs(e.y-n.y)*u+n.height*u/2),{updatedX:r+l+c.x,updatedY:i+f+c.y};case ct.CENTER_RIGHT:return f=e.height/2-(Math.abs(e.y-n.y)*u+n.height*u/2),{updatedX:r+(e.width-(Math.abs(e.x-n.x)*u+n.width*u))+c.x,updatedY:i+f+c.y};case ct.BOTTOM_LEFT:return{updatedX:r+((e.x-n.x)*u+c.x),updatedY:i+(e.height-(Math.abs(e.y-n.y)*u+n.height*u))+c.y};case ct.BOTTOM_CENTER:return l=e.width/2-(Math.abs(e.x-n.x)*u+n.width*u/2),{updatedX:r+l+c.x,updatedY:i+(e.height-(Math.abs(e.y-n.y)*u+n.height*u))+c.y};case ct.BOTTOM_RIGHT:return{updatedX:r+(e.width-(Math.abs(e.x-n.x)*u+n.width*u))+c.x,updatedY:i+(e.height-(Math.abs(e.y-n.y)*u+n.height))+c.y};default:return{updatedX:r,updatedY:i}}},Vn=t=>{const[e,n]=[Math.max(t-.2,.2),t];return[et.INITIAL_SCROLLBAR_SIZE/e,et.INITIAL_SCROLLBAR_SIZE/n]},ka=({isVertical:t,state:e,scrollDelta:n})=>{const r=t?e.verticalPos:e.horizontalPos,i=t?e.verticalSize:e.horizontalSize,a=t?e.verticalSizeDecrease:e.horizontalSizeDecrease,o=t?n.deltaY:n.deltaX;return{scrollPos:r,scrollSize:i,scrollSizeDecrease:a,deltaValue:o}},Wn=({isVertical:t=!0,state:e,scrollDelta:n,scrollLength:r})=>{const{scrollPos:i,scrollSize:a,scrollSizeDecrease:o,deltaValue:c}=ka({isVertical:t,state:e,scrollDelta:n}),l=c/10||0,f=c/100||0;let[u,p]=[i+l,o];if(u<1)u=0,p-=Math.abs(f);else if(u+a>r){const m=r-Math.max(et.MIN_SCROLLBAR_SIZE,a-Math.abs(p));u=Math.min(r-(a+p),m),p-=f}else if(p!==0){const m=u>r/2;u=m?r-a:0,m?(p-=f,p<=0&&(p=0)):(p+=Math.abs(f),p>=0&&(p=0))}return[u,p]},Da={dotSvgContainer:"_dotSvgContainer_64xbd_1"},$n=({id:t="",size:e=1,minSize:n=.3,maxZoom:r=4,gap:i=20,zoomTransform:a={scale:1,translateX:0,translateY:0},className:o="",minOpacity:c=.8,maxOpacity:l=1,elementColor:f="#afb7c7"})=>{const{scale:u,translateX:p,translateY:m}=a,w=Lt({value:u*10/(r*10),min:c,max:l}),z=i*u,R=e*u,A=Math.max(n,R),E=`patternId-${t}`;return K.jsxs("svg",{className:`${o} ${Da.dotSvgContainer}`,children:[K.jsx("pattern",{id:E,x:p%z,y:m%z,width:z,height:z,patternUnits:"userSpaceOnUse",patternTransform:`translate(-${R},-${R})`,children:K.jsx("circle",{cx:A,cy:A,r:A,fill:f,opacity:w})}),K.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})},Nt={container:"_container_1xxyl_1",canvasWrapper:"_canvasWrapper_1xxyl_8",panning:"_panning_1xxyl_21",canvas:"_canvas_1xxyl_8",contentWrapper:"_contentWrapper_1xxyl_39"},jn={verticalScrollBar:"_verticalScrollBar_17thb_1",horizontalScrollBar:"_horizontalScrollBar_17thb_9"},La=N.forwardRef(({scale:t,startingPosition:e,offset:n={x:0,y:0},color:r="gray",thickness:i="8px",minSize:a="15px",verticalOffsetHeight:o,horizontalOffsetWidth:c,onScrollDeltaHandler:l,getContainerOffset:f},u)=>{const[p,m]=Vn(t),w=N.useRef(null),z=N.useRef(null),R=N.useRef({isDragging:!1,vertical:!0,initialOffset:0}),[A,E]=N.useState({scale:t,horizontalSize:m,horizontalPos:e?e.x:(c??0)/et.SCROLL_POS_RATIO,horizontalSizeDecrease:0,verticalSize:p,verticalPos:e?e.y:(o??0)/et.SCROLL_POS_RATIO,verticalSizeDecrease:0});N.useImperativeHandle(u,()=>({resetScrollPos:()=>{E(L=>({...L,horizontalPos:(c??0)/et.SCROLL_POS_RATIO,verticalPos:(o??0)/et.SCROLL_POS_RATIO,verticalSizeDecrease:0,horizontalSizeDecrease:0}))},onScrollDeltaChangeHandler:I,onMouseUp:B})),N.useEffect(function(){E(F=>{let j;const[rt,ut]=Vn(t),Q=t/F.scale||0;return t<F.scale?j={horizontalPos:F.horizontalPos-Q,verticalPos:F.verticalPos-Q}:j={horizontalPos:F.horizontalPos+Q,verticalPos:F.verticalPos+Q},{...F,scale:t,horizontalSize:ut,verticalSize:rt,...j}})},[t]);function I(L){R.current.isDragging||E(F=>{const[j,rt]=Wn({state:F,scrollDelta:L,scrollLength:o}),[ut,Q]=Wn({isVertical:!1,state:F,scrollDelta:L,scrollLength:c});return{...F,horizontalPos:ut,horizontalSizeDecrease:Q,verticalPos:j,verticalSizeDecrease:rt}})}const $=N.useCallback(function(F,j){if(!R.current.isDragging)return;F.stopPropagation();const{movementX:rt,movementY:ut,clientX:Q,clientY:nt,offsetX:h,offsetY:b}=F;R.current.initialOffset<1&&(R.current.initialOffset=j?b:h);const d=j?ut:rt,g=(j?nt:Q)-R.current.initialOffset-f(j),v=C=>j?["verticalPos",C.verticalSize,o,n.y]:["horizontalPos",C.horizontalSize,c,n.x];E(C=>{const[X,P,W,H]=v(C);return{...C,[X]:Lt({value:g,min:H,max:W-P})}});const y=()=>{const C=d>0?d+et.SCROLL_DELTA_DIFF:d-et.SCROLL_DELTA_DIFF;return j?{deltaX:0,deltaY:C}:{deltaX:C,deltaY:0}},S=(j?o:c)-(j?A.verticalSize:A.horizontalSize);!(g<=0||g>=S)&&d!==0&&l(y())},[o,c,n.y,n.x]),B=N.useCallback(function(){R.current.isDragging=!1,R.current.initialOffset=0,window.removeEventListener("mousemove",F=>$(F,R.current.vertical)),window.removeEventListener("mouseup",B)},[$]),U=N.useCallback(function(){window.addEventListener("mousemove",F=>$(F,R.current.vertical)),window.addEventListener("mouseup",B)},[$,B]),D=L=>{L.stopPropagation()};return K.jsxs(N.Fragment,{children:[K.jsx("div",{className:jn.verticalScrollBar,style:{width:i},ref:w,children:K.jsx("div",{"data-id":"vertical-scrollbar",style:{insetBlockStart:`${Lt({value:A.verticalPos,min:n.y,max:o})}px`,height:`${A.verticalSize+A.verticalSizeDecrease}px`,background:r,minHeight:a},onMouseDownCapture:L=>{L.stopPropagation(),R.current={...R.current,isDragging:!0,vertical:!0},U()},onDragEnterCapture:D,onDragCapture:D,onDragEndCapture:D})}),K.jsx("div",{className:jn.horizontalScrollBar,ref:z,style:{height:i},children:K.jsx("div",{"data-id":"horizontal-scrollbar",style:{insetInlineStart:`${Lt({value:A.horizontalPos,min:n.x,max:c})}px`,width:`${A.horizontalSize+A.horizontalSizeDecrease}px`,background:r,minWidth:a},onMouseDownCapture:L=>{L.stopPropagation(),R.current={...R.current,isDragging:!0,vertical:!1},U()},onDragEnterCapture:D,onDragCapture:D,onDragEndCapture:D})})]})});let we=!1;typeof navigator<"u"&&(we=/^((?!chrome|android).)*safari/i.test(navigator.userAgent));const xe=we?600:300,Fa=N.forwardRef(({children:t,...e},n)=>{const r=N.useRef(null);return K.jsx(Ya,{innerRef:n,...e,children:K.jsx("div",{ref:r,style:{width:"max-content",height:"max-content"},children:t})})}),Ya=N.memo(({children:t,innerRef:e,minZoom:n=et.DEFAULT_MIN_ZOOM,maxZoom:r=et.DEFAULT_MAX_ZOOM,panOnScroll:i=!0,customComponents:a=[],renderScrollBar:o=!0,scrollBarConfig:c={},backgroundConfig:l={},onCanvasMount:f=()=>{},onTransform:u=()=>{},disableMousePanningClasses:p=[],disableScrollPanningClasses:m=[]})=>{const w=N.useRef(null),z=N.useRef(null),R=N.useRef(null),A=N.useRef(null),E=N.useRef(null),I=t.ref,$=N.useRef(null),B=N.useRef(null),U=N.useMemo(()=>Un().scaleExtent([n,r]),[r,n]),D=N.useRef(tt(R.current).call(U)),[L,F]=N.useState({translateX:0,translateY:0,scale:1});N.useImperativeHandle(e,()=>({scrollNodeToCenter:({nodeElement:d,offset:g,scale:v,shouldUpdateMaxScale:y,maxScale:S,transitionDuration:T})=>Q({nodeElement:d,offset:g,scale:v,shouldUpdateMaxScale:y,maxScale:S,transitionDuration:T,position:ct.CENTER_CENTER}),scrollNodeHandler:Q,scrollContentHorizontallyCenter:nt,fitContentToView:rt,setCanvasPosition:ut,getCanvasState:h})),N.useEffect(()=>{const d=v=>{v.code==="Space"&&(B.current=!0)},g=v=>{v.code==="Space"&&(B.current=!1)};return window.addEventListener("keydown",d),window.addEventListener("keyup",g),()=>{window.removeEventListener("keydown",d),window.removeEventListener("keyup",g)}},[]),N.useEffect(function(){D.current=tt(R.current).call(U);const g=tt(A.current);z.current=w.current?w.current.getBoundingClientRect():{},U.filter(v=>{if(v.type==="mousedown"&&!$.current&&($.current=!0),!B.current){let y=v.target;for(;y;){if(p.filter(S=>y==null?void 0:y.classList.contains(S)).length>0)return!1;y=y.parentElement}}return v.ctrlKey||v.metaKey||v.type!=="wheel"}).on("zoom",v=>{var P,W,H;((P=v.sourceEvent)==null?void 0:P.ctrlKey)===!1&&((W=v.sourceEvent)==null?void 0:W.metaKey)===!1&&v.type==="zoom"&&((H=w.current)==null||H.classList.add(Nt.panning));const y=v.transform,{x:S,y:T,k:C}=y,X=A.current;F({translateX:S,translateY:T,scale:C}),we&&X?X.style.transform=`translate(${S}px, ${T}px) scale(${C})`:g.attr("transform",y)}),U.on("end",()=>{var v;$.current=!1,(v=w.current)==null||v.classList.remove(Nt.panning)}),f({scrollNodeToCenter:({nodeElement:v,offset:y,scale:S,shouldUpdateMaxScale:T,maxScale:C,transitionDuration:X})=>Q({nodeElement:v,offset:y,scale:S,shouldUpdateMaxScale:T,maxScale:C,transitionDuration:X,position:ct.CENTER_CENTER}),scrollNodeHandler:Q,scrollContentHorizontallyCenter:nt,fitContentToView:rt,setCanvasPosition:ut,getCanvasState:h})},[]),N.useEffect(()=>{u(L)},[u,L]),D.current.call(Un).on("wheel.zoom",d=>{var v;const g=D.current.property("__zoom").k||1;if(i&&!d.ctrlKey&&!d.metaKey){let y=d.target;for(;y;){if(m.filter(T=>y==null?void 0:y.classList.contains(T)).length>0)return;y=y.parentElement}d.preventDefault();const S={deltaX:d.deltaX,deltaY:d.deltaY};(v=E.current)==null||v.onScrollDeltaChangeHandler(S),j(S)}else{d.preventDefault();const y=g*Math.pow(2,-d.deltaY*.01);U.scaleTo(D.current,y,Et(d))}},{passive:!1,capture:!0});const j=d=>{const g=D.current.property("__zoom").k||1;U.translateBy(D.current,-(d.deltaX/g),-(d.deltaY/g))},rt=N.useCallback(function({duration:g=500,offset:v={x:0,y:0},scale:y,maxZoomLimit:S=et.FIT_TO_VIEW_MAX_ZOOM,disableVerticalCenter:T=!1}){requestIdleCallback(()=>{var Yt,Se;if(!I.current)return;const C=tt(R.current),X=I.current.getBoundingClientRect(),P=D.current.property("__zoom").k||1,W=(Yt=R.current)==null?void 0:Yt.getBoundingClientRect(),{width:H=0,height:G=0}=W||{},Z=1/P,it=X.width*Z,lt=X.height*Z,Ft=G/lt,zt=H/it,Rt=y??Lt({value:Math.min(S,Math.min(Ft,zt)),min:n,max:r}),ee=H-it*Rt,wt=G-lt*Rt,xt=!T&&Ft>zt,At=ee/2,be=xt?wt/2:0,It=At+v.x,Ee=be+v.y,$e=Dt.translate(It,Ee).scale(Rt);F({translateX:It,translateY:Ee,scale:Rt}),(Se=E.current)==null||Se.resetScrollPos(),C.transition().duration(g).call(U.transform,$e)},{timeout:xe})},[r,n]),ut=N.useCallback(function({scale:g,translateX:v,translateY:y,transitionDuration:S=300}){requestIdleCallback(()=>{var lt;const T=tt(R.current),C=D.current.property("__zoom"),{k:X,x:P,y:W}=C,H=g!==void 0?Lt({value:g,min:n,max:r}):X,G=v!==void 0?v:P,Z=y!==void 0?y:W,it=Dt.translate(G,Z).scale(H);F({translateX:G,translateY:Z,scale:H}),(lt=E.current)==null||lt.resetScrollPos(),T.transition().duration(S).call(U.transform,it)},{timeout:xe})},[r,n]),Q=({nodeElement:d,offset:g={x:0,y:0},scale:v,shouldUpdateMaxScale:y=!0,maxScale:S,transitionDuration:T=300,position:C=ct.TOP_CENTER})=>{requestIdleCallback(()=>{if(!d)return;const X=D.current.property("__zoom"),{k:P,x:W,y:H}=X,G=tt(R.current),it=(()=>{const wt=At=>S?Math.min(S,At):At;if(!v)return wt(P);let xt=v;return y&&(xt=Math.max(v,P)),wt(xt)})(),lt=R.current.getBoundingClientRect(),Ft=d.getBoundingClientRect(),{updatedX:zt,updatedY:Rt}=Pa({position:C,svgBounds:lt,nodeBounds:Ft,currentTranslateX:W,currentTranslateY:H,currentScale:P,updatedScale:it,customOffset:{x:g.x,y:g.y}}),ee=Dt.translate(zt,Rt).scale(it);G.transition().duration(T).call(U.transform,ee)},{timeout:xe})},nt=({offset:d=0,transitionDuration:g=300})=>{I.current&&requestIdleCallback(()=>{const v=D.current.property("__zoom"),{k:y,y:S}=v,T=tt(R.current),C=R.current.getBoundingClientRect(),X=I.current.getBoundingClientRect(),P=1/y,W=X.width*P,H=(C.width-W*y)/2+d;F({...L,translateX:H});const G=Dt.translate(H,S).scale(y);T.transition().duration(g).call(U.transform,G)},{timeout:xe})},h=()=>({canvasNode:tt(R.current),zoomNode:tt(A.current),currentPosition:D.current.property("__zoom"),d3Zoom:U}),b=N.useCallback(function(g=!0){const{x:v,y}=z.current;return g?y:v},[]);return K.jsxs("div",{className:Nt.container,children:[K.jsx("div",{ref:w,className:Nt.canvasWrapper,children:we?K.jsx("div",{ref:R,className:Nt.canvas,children:K.jsx("div",{ref:A,children:K.jsx("div",{className:Nt.contentWrapper,children:t})})}):K.jsx("svg",{ref:R,className:Nt.canvas,children:K.jsx("g",{ref:A,children:K.jsx("foreignObject",{x:et.INITIAL_POSITION_X,y:et.INITIAL_POSITION_Y,width:et.DEFAULT_LAYOUT,height:et.DEFAULT_LAYOUT,children:t})})})}),K.jsx($n,{maxZoom:r,zoomTransform:L,...l}),o&&w.current&&K.jsx(La,{ref:E,scale:L.scale,...c,verticalOffsetHeight:w.current.offsetHeight,horizontalOffsetWidth:w.current.offsetWidth,getContainerOffset:b,onScrollDeltaHandler:j}),a.map((d,g)=>{const{component:v,position:y=te.BOTTOM_LEFT,offset:S={x:0,y:0},overlap:T=!0,className:C=""}=d;return K.jsx(Xa,{component:v,position:y,offset:S,overlap:T,zoomState:{...L,minZoom:n,maxZoom:r},className:C},g)})]})}),Xa=({component:t,position:e,offset:n,overlap:r,zoomState:i,className:a})=>{const o=N.useMemo(()=>{const l=Object.values(te).includes(e)?e:te.BOTTOM_LEFT,[f,u]=l.split("-");return{[u]:n.x,[f]:n.y}},[e,n]),c=N.cloneElement(t,{zoomState:i});return K.jsx("div",{style:{position:"absolute",...o,zIndex:r?20:1},className:a,children:c})};pt.Background=$n,pt.COMPONENT_POSITIONS=te,pt.ReactInfiniteCanvas=Fa,pt.SCROLL_NODE_POSITIONS=ct,Object.defineProperty(pt,Symbol.toStringTag,{value:"Module"})});
